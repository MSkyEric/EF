@model PagedList.StaticPagedList<Models.Product>

@using PagedList.Mvc;
@{
    ViewBag.Title = "ProductList";
}
@*<link rel="stylesheet" type="text/css" href=" http://cdn.datatables.net/plug-ins/28e7751dbec/integration/bootstrap/3/dataTables.bootstrap.css" />
<script type="text/javascript" src="http://cdn.datatables.net/plug-ins/28e7751dbec/integration/bootstrap/3/dataTables.bootstrap.js"></script>*@

<link rel="stylesheet" type="text/css" href=" http://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" />
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.15/datatables.min.js"></script>


<style>

    td.highlight {
        background-color: whitesmoke !important;
    }
</style>


<h2 class=" alert-info">Product</h2>
@*href="@Url.Action("Add", "Product")"href="/Product/Edit/15"*@
<a  id="btnReturnAdd" class="btn btn-primary">Add a Product</a>
<a class="btn btn-primary"  id="edit_156" name="linkEdit" style="color: rgb(160, 4, 242);">Edit</a>
<button id="table_id_example_button" class="btn btn-default">查询</button>

<table id="table_id_example" class="display">
    @*class="table table-striped table-hover"*@
<thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
</thead>
<tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(o => item.ID)
            </td>
            <td>

                @*<a href="@Url.Action("Edit", "Porduct", new {ID = (item.ID)})"  style="color:#6bbee6" id="btnEdit">@item.Name</a>*@
                @Html.ActionLink(@item.Name, "Edit", new { ID = item.ID })
            </td>

            <td>
                @item.Price
            </td>
            <td>
                @item.Quantity
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { ID = item.ID }, new { @class = "btn btn-primary",id = "edit_" + item.ID,
               name = "linkEdit", })


            </td>
            <td>
                @*@Html.ActionLink("Delete", "Delete", new { ID = item.ID },
                new { onClick = "javascript:return confirm('Are you sure you want to delete " + item.Name + "?');" })*@

                @Html.ActionLink("Delete", "Delete", "Product", new { ID = item.ID }, new
           {
               @class = "btn btn-primary",
               id = "link_" + item.ID,
               name = "linkDelete",
                 onClick = "javascript:return confirm('Are you sure you want to delete " + item.Name + "?');"           })

                @*@Html.ActionLink("关于我们", "About", "Product", new { pp = "123" }, new { @class = "curr", id = "link1", name = "link1", target = "_blank", pwd = "2" })*@


            </td>
        </tr>
    }
</tbody>
</table>



@*@Html.PagedListPager(Model, page => Url.Action("Index", new { page = page }),
    new PagedListRenderOptions { LinkToFirstPageFormat = "首页", LinkToPreviousPageFormat = "上一页", LinkToNextPageFormat = "下一页", LinkToLastPageFormat = "尾页", MaximumPageNumbersToDisplay = 5 })*@

@Html.PagedListPager((PagedList.IPagedList)Model, page => Url.Action("Index", new { page = page }))


<button id="test1" class="btn btn-primary btn-lg">弹出层</button>

<button id="delRow" class="btn btn-primary btn-lg">删除一行</button>
<button id="addRow" class="btn btn-primary btn-lg">添加一行</button>
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
    开始演示模态框
</button>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    模态框（Modal）标题
                </h4>
            </div>
            <div class="modal-body">
                在这里添加一些文本
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    关闭
                </button>
                <button type="button" class="btn btn-primary">
                    提交更改
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>


<table id="example" class="display" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Office</th>
            <th>Age</th>
            <th>Start date</th>
            <th>Salary</th>
        </tr>
    </thead>

    <tfoot>
        <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Office</th>
            <th>Age</th>
            <th>Start date</th>
            <th>Salary</th>
        </tr>
    </tfoot>

    <tbody>
        <tr>
            <td>Tiger Nixon</td>
            <td>System Architect</td>
            <td>Edinburgh</td>
            <td>61</td>
            <td>2011/04/25</td>
            <td>$320,800</td>
        </tr>
        <tr>
            <td>Garrett Winters</td>
            <td>Accountant</td>
            <td>Tokyo</td>
            <td>63</td>
            <td>2011/07/25</td>
            <td>$170,750</td>
        </tr>
        <tr>
            <td>Ashton Cox</td>
            <td>Junior Technical Author</td>
            <td>San Francisco</td>
            <td>66</td>
            <td>2009/01/12</td>
            <td>$86,000</td>
        </tr>
        <tr>
            <td>Cedric Kelly</td>
            <td>Senior Javascript Developer</td>
            <td>Edinburgh</td>
            <td>22</td>
            <td>2012/03/29</td>
            <td>$433,060</td>
        </tr>
        <tr>
            <td>Airi Satou</td>
            <td>Accountant</td>
            <td>Tokyo</td>
            <td>33</td>
            <td>2008/11/28</td>
            <td>$162,700</td>
        </tr>
        <tr>
            <td>Brielle Williamson</td>
            <td>Integration Specialist</td>
            <td>New York</td>
            <td>61</td>
            <td>2012/12/02</td>
            <td>$372,000</td>
        </tr>
        <tr>
            <td>Herrod Chandler</td>
            <td>Sales Assistant</td>
            <td>San Francisco</td>
            <td>59</td>
            <td>2012/08/06</td>
            <td>$137,500</td>
        </tr>
        <tr>
            <td>Rhona Davidson</td>
            <td>Integration Specialist</td>
            <td>Tokyo</td>
            <td>55</td>
            <td>2010/10/14</td>
            <td>$327,900</td>
        </tr>
        <tr>
            <td>Colleen Hurst</td>
            <td>Javascript Developer</td>
            <td>San Francisco</td>
            <td>39</td>
            <td>2009/09/15</td>
            <td>$205,500</td>
        </tr>
        <tr>
            <td>Sonya Frost</td>
            <td>Software Engineer</td>
            <td>Edinburgh</td>
            <td>23</td>
            <td>2008/12/13</td>
            <td>$103,600</td>
        </tr>
        <tr>
            <td>Jena Gaines</td>
            <td>Office Manager</td>
            <td>London</td>
            <td>30</td>
            <td>2008/12/19</td>
            <td>$90,560</td>
        </tr>
        <tr>
            <td>Quinn Flynn</td>
            <td>Support Lead</td>
            <td>Edinburgh</td>
            <td>22</td>
            <td>2013/03/03</td>
            <td>$342,000</td>
        </tr>
        <tr>
            <td>Charde Marshall</td>
            <td>Regional Director</td>
            <td>San Francisco</td>
            <td>36</td>
            <td>2008/10/16</td>
            <td>$470,600</td>
        </tr>
        <tr>
            <td>Haley Kennedy</td>
            <td>Senior Marketing Designer</td>
            <td>London</td>
            <td>43</td>
            <td>2012/12/18</td>
            <td>$313,500</td>
        </tr>
        <tr>
            <td>Tatyana Fitzpatrick</td>
            <td>Regional Director</td>
            <td>London</td>
            <td>19</td>
            <td>2010/03/17</td>
            <td>$385,750</td>
        </tr>
        <tr>
            <td>Michael Silva</td>
            <td>Marketing Designer</td>
            <td>London</td>
            <td>66</td>
            <td>2012/11/27</td>
            <td>$198,500</td>
        </tr>
        <tr>
            <td>Paul Byrd</td>
            <td>Chief Financial Officer (CFO)</td>
            <td>New York</td>
            <td>64</td>
            <td>2010/06/09</td>
            <td>$725,000</td>
        </tr>
        <tr>
            <td>Gloria Little</td>
            <td>Systems Administrator</td>
            <td>New York</td>
            <td>59</td>
            <td>2009/04/10</td>
            <td>$237,500</td>
        </tr>
        <tr>
            <td>Bradley Greer</td>
            <td>Software Engineer</td>
            <td>London</td>
            <td>41</td>
            <td>2012/10/13</td>
            <td>$132,000</td>
        </tr>
        <tr>
            <td>Dai Rios</td>
            <td>Personnel Lead</td>
            <td>Edinburgh</td>
            <td>35</td>
            <td>2012/09/26</td>
            <td>$217,500</td>
        </tr>
        <tr>
            <td>Jenette Caldwell</td>
            <td>Development Lead</td>
            <td>New York</td>
            <td>30</td>
            <td>2011/09/03</td>
            <td>$345,000</td>
        </tr>
        <tr>
            <td>Yuri Berry</td>
            <td>Chief Marketing Officer (CMO)</td>
            <td>New York</td>
            <td>40</td>
            <td>2009/06/25</td>
            <td>$675,000</td>
        </tr>
        <tr>
            <td>Caesar Vance</td>
            <td>Pre-Sales Support</td>
            <td>New York</td>
            <td>21</td>
            <td>2011/12/12</td>
            <td>$106,450</td>
        </tr>
        <tr>
            <td>Doris Wilder</td>
            <td>Sales Assistant</td>
            <td>Sidney</td>
            <td>23</td>
            <td>2010/09/20</td>
            <td>$85,600</td>
        </tr>
        <tr>
            <td>Angelica Ramos</td>
            <td>Chief Executive Officer (CEO)</td>
            <td>London</td>
            <td>47</td>
            <td>2009/10/09</td>
            <td>$1,200,000</td>
        </tr>
        <tr>
            <td>Gavin Joyce</td>
            <td>Developer</td>
            <td>Edinburgh</td>
            <td>42</td>
            <td>2010/12/22</td>
            <td>$92,575</td>
        </tr>
        <tr>
            <td>Jennifer Chang</td>
            <td>Regional Director</td>
            <td>Singapore</td>
            <td>28</td>
            <td>2010/11/14</td>
            <td>$357,650</td>
        </tr>
        <tr>
            <td>Brenden Wagner</td>
            <td>Software Engineer</td>
            <td>San Francisco</td>
            <td>28</td>
            <td>2011/06/07</td>
            <td>$206,850</td>
        </tr>
        <tr>
            <td>Fiona Green</td>
            <td>Chief Operating Officer (COO)</td>
            <td>San Francisco</td>
            <td>48</td>
            <td>2010/03/11</td>
            <td>$850,000</td>
        </tr>
        <tr>
            <td>Shou Itou</td>
            <td>Regional Marketing</td>
            <td>Tokyo</td>
            <td>20</td>
            <td>2011/08/14</td>
            <td>$163,000</td>
        </tr>
        <tr>
            <td>Michelle House</td>
            <td>Integration Specialist</td>
            <td>Sidney</td>
            <td>37</td>
            <td>2011/06/02</td>
            <td>$95,400</td>
        </tr>
        <tr>
            <td>Suki Burks</td>
            <td>Developer</td>
            <td>London</td>
            <td>53</td>
            <td>2009/10/22</td>
            <td>$114,500</td>
        </tr>
        <tr>
            <td>Prescott Bartlett</td>
            <td>Technical Author</td>
            <td>London</td>
            <td>27</td>
            <td>2011/05/07</td>
            <td>$145,000</td>
        </tr>
        <tr>
            <td>Gavin Cortez</td>
            <td>Team Leader</td>
            <td>San Francisco</td>
            <td>22</td>
            <td>2008/10/26</td>
            <td>$235,500</td>
        </tr>
        <tr>
            <td>Martena Mccray</td>
            <td>Post-Sales support</td>
            <td>Edinburgh</td>
            <td>46</td>
            <td>2011/03/09</td>
            <td>$324,050</td>
        </tr>
        <tr>
            <td>Unity Butler</td>
            <td>Marketing Designer</td>
            <td>San Francisco</td>
            <td>47</td>
            <td>2009/12/09</td>
            <td>$85,675</td>
        </tr>
        <tr>
            <td>Howard Hatfield</td>
            <td>Office Manager</td>
            <td>San Francisco</td>
            <td>51</td>
            <td>2008/12/16</td>
            <td>$164,500</td>
        </tr>
        <tr>
            <td>Hope Fuentes</td>
            <td>Secretary</td>
            <td>San Francisco</td>
            <td>41</td>
            <td>2010/02/12</td>
            <td>$109,850</td>
        </tr>
        <tr>
            <td>Vivian Harrell</td>
            <td>Financial Controller</td>
            <td>San Francisco</td>
            <td>62</td>
            <td>2009/02/14</td>
            <td>$452,500</td>
        </tr>
        <tr>
            <td>Timothy Mooney</td>
            <td>Office Manager</td>
            <td>London</td>
            <td>37</td>
            <td>2008/12/11</td>
            <td>$136,200</td>
        </tr>
        <tr>
            <td>Jackson Bradshaw</td>
            <td>Director</td>
            <td>New York</td>
            <td>65</td>
            <td>2008/09/26</td>
            <td>$645,750</td>
        </tr>
        <tr>
            <td>Olivia Liang</td>
            <td>Support Engineer</td>
            <td>Singapore</td>
            <td>64</td>
            <td>2011/02/03</td>
            <td>$234,500</td>
        </tr>
        <tr>
            <td>Bruno Nash</td>
            <td>Software Engineer</td>
            <td>London</td>
            <td>38</td>
            <td>2011/05/03</td>
            <td>$163,500</td>
        </tr>
        <tr>
            <td>Sakura Yamamoto</td>
            <td>Support Engineer</td>
            <td>Tokyo</td>
            <td>37</td>
            <td>2009/08/19</td>
            <td>$139,575</td>
        </tr>
        <tr>
            <td>Thor Walton</td>
            <td>Developer</td>
            <td>New York</td>
            <td>61</td>
            <td>2013/08/11</td>
            <td>$98,540</td>
        </tr>
        <tr>
            <td>Finn Camacho</td>
            <td>Support Engineer</td>
            <td>San Francisco</td>
            <td>47</td>
            <td>2009/07/07</td>
            <td>$87,500</td>
        </tr>
        <tr>
            <td>Serge Baldwin</td>
            <td>Data Coordinator</td>
            <td>Singapore</td>
            <td>64</td>
            <td>2012/04/09</td>
            <td>$138,575</td>
        </tr>
        <tr>
            <td>Zenaida Frank</td>
            <td>Software Engineer</td>
            <td>New York</td>
            <td>63</td>
            <td>2010/01/04</td>
            <td>$125,250</td>
        </tr>
        <tr>
            <td>Zorita Serrano</td>
            <td>Software Engineer</td>
            <td>San Francisco</td>
            <td>56</td>
            <td>2012/06/01</td>
            <td>$115,000</td>
        </tr>
        <tr>
            <td>Jennifer Acosta</td>
            <td>Junior Javascript Developer</td>
            <td>Edinburgh</td>
            <td>43</td>
            <td>2013/02/01</td>
            <td>$75,650</td>
        </tr>
        <tr>
            <td>Cara Stevens</td>
            <td>Sales Assistant</td>
            <td>New York</td>
            <td>46</td>
            <td>2011/12/06</td>
            <td>$145,600</td>
        </tr>
        <tr>
            <td>Hermione Butler</td>
            <td>Regional Director</td>
            <td>London</td>
            <td>47</td>
            <td>2011/03/21</td>
            <td>$356,250</td>
        </tr>
        <tr>
            <td>Lael Greer</td>
            <td>Systems Administrator</td>
            <td>London</td>
            <td>21</td>
            <td>2009/02/27</td>
            <td>$103,500</td>
        </tr>
        <tr>
            <td>Jonas Alexander</td>
            <td>Developer</td>
            <td>San Francisco</td>
            <td>30</td>
            <td>2010/07/14</td>
            <td>$86,500</td>
        </tr>
        <tr>
            <td>Shad Decker</td>
            <td>Regional Director</td>
            <td>Edinburgh</td>
            <td>51</td>
            <td>2008/11/13</td>
            <td>$183,000</td>
        </tr>
        <tr>
            <td>Michael Bruce</td>
            <td>Javascript Developer</td>
            <td>Singapore</td>
            <td>29</td>
            <td>2011/06/27</td>
            <td>$183,000</td>
        </tr>
        <tr>
            <td>Donna Snider</td>
            <td>Customer Support</td>
            <td>New York</td>
            <td>27</td>
            <td>2011/01/25</td>
            <td>$112,000</td>
        </tr>
    </tbody>
</table>

<script type="text/javascript">
    
    $(function () {

        var table1 = $('#example').DataTable();

        $('#example tbody').on('click', 'tr', function () {
            //debugger;
            if ($(this).hasClass('selected')) {
                $(this).removeClass('selected');
            }
            else {
                table1.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
            }
        });

        $('#button').click(function () {
            table.row('.selected').remove().draw(false);
        });

        $("#test1").on("click", function () {
            //layer.tips('hello tips','#test1')
            //layer.msg('hello');
            //layer.open({
            //    type: 1,
            //    area: ['600px', '360px'],
            //    shadeClose: true,
            //    content: $('#myModal').html()
            //});

            //debugger;
            var data = table.row('.selected').data();
            if (data == undefined)
            {
                layer.tips('please select a row!', '#test1')
                layer.msg('please select a row!');
                return false;
            }

                //alert('You clicked on ' + data.ID + '\'s row');

            layer.prompt({ title: '输入任何口令，并确认', formType: 1 }, function (pass, index) {
                pass = index.toString() + pass + data.ID;
                layer.close(index);
                layer.prompt({ title: '随便写点啥，并确认', formType: 2 }, function (text, index) {
                    layer.close(index);
                    layer.msg('演示完毕！'+ index +'您的口令：' + pass + '<br>'+ index +'您最后写下了：' + text);
                });
            });

        });

        //console.log($("a[id ^= 'edit_']"));

        //$("a[id ^= 'edit_']").each(function () {
        //    let a = $(this);

        //    var color = "#" + (~~(Math.random() * (1 << 24))).toString(16);
        //    console.log(color);
        //    //debugger;
        //    a.css("color", color);
        //    a.on('click',function () {
        //        return confirm('aaaaa');
        //    });
        //});

        //a[id ^= 'link_']
        $("#edit_156, #btnReturnAdd").on('click', function () {
            parent.layer.confirm("确定要新增信息吗！", { btn: ['确认', '取消'] }, function () {
                location.href = "/product/add";
            },function () {
                layer.msg('cancled add!');
            });
        });
        
        $('#delRow').on('click', function () {
            //debugger;
            var row = table.row('.selected');
            var data = row.data();
            if (data == undefined) {
                layer.tips('please select a row!', '#delRow')
                layer.msg('please select a row!');
                return false;
            }
            
            parent.layer.confirm("确定要删除该信息吗！", { btn: ['确认', '取消'] }, function () {

                var id = data.ID;
                $.post("/Product/Delete", { ID: id }, function (data) {
                    //debugger;
                    //if (data.result) {
                    //    cc.remove().draw(false);
                    //    parent.layer.close(parent.layer.index);
                    //    parent.layer.msg(data.message);
                    //} else {
                    //    parent.layer.msg(data.message);
                    //}
                    row.remove().draw(false);
                    layer.msg('successfully deleted!');

                });
            }, function () {
                layer.msg('cancled delete!');
            });
        });

        ///*
        //debugger;
        var table = $('#table_id_example').DataTable({
            //这样配置后，即可用DT的API来访问表格数据
            columns: [
                { data: "ID" },
                { data: "Name" },
                { data: "Price" },
                { data: "Quantity" },
                { data: "Edit" },
                { data: "Delete" }
            ],
            "paging": false,
            remoteSort: false
            //pageLength: 3,
            //stateSave: true,
            //"pagingType": "full_numbers",
            //"columnDefs": [
            //      {
            //          "targets": [ 2 ],
            //          "visible": false,
            //          "searchable": false
            //      },
            //      {
            //          "targets": [ 3 ],
            //          "visible": false
            //      }
            //],
            //"columnDefs": [
                    //{
                    //    orderable: false,
                    //    targets: 0
                    //},
                    //{
                    //    orderable: false,
                    //    targets: 1
                    //},
            //{
            //    'targets': 1,
            //    'searchable': false,
            //    'orderable': false,
            //    'className': 'dt-body-center',
            //    'render': function (data, type, full, meta){
            //        debugger;
            //        return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //    }
            //],//第一列与第二列禁止排序

            //"initComplete": function () {
            //    var api = this.api();
            //    api.$('td').click(function () {
            //        api.search(this.innerHTML).draw();
            //    });
            //}

            //"columnDefs": [{
            //    "render": function (data, type, row) {
            //        return data + "(" + row(0) + ")";
            //    },
            //    "target": 1
            //},
            //{
            //    "visible": false,
            //    "targets": 1
            //}
            //]
        });



        //给按钮绑定点击事件
        //$("#table_id_example_button").click(function () {
        //    var column1 = table.row('.selected').data().ID;
        //    var column2 = table.row('.selected').data().Name;
        //    alert("第一列内容：" + column1 + "；第二列内容： " + column2);
        //});

        //$('#table_id_example tbody').on('click', 'tr', function () {
        //    $(this).toggleClass('selected');
        //});
        //var lastIdx = null;
        //$('#table_id_example tbody').on('mouseover', 'td', function () {
        //    var colIdx = table.cell(this).index().column;
        //    if (colIdx !== lastIdx) {
        //        $(table.cells().nodes()).removeClass('highlight');
        //        $(table.column(colIdx).nodes()).addClass('highlight');
        //    }
        //}).on('mouseleave', function () {
        //    $(table.cells().nodes()).removeClass('highlight');
        //});

        //*/
        //给行绑定选中事件
        $('#table_id_example tbody').on('click', 'tr', function () {

            //$(this).addClass('selected');
            //debugger;
            if ($(this).hasClass('selected')) {
                $(this).removeClass('selected');
                //$(this).css("background-color", "#1fb674");
            }
            else {
                table.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
            }
        });

        //$('#table_id_example tbody').on('click', 'tr', function () {
        //    //debugger;
        //    var data = table.row(this).data();
        //    alert('You clicked on ' + data.ID + '\'s row');
        //});

        $("#btnAdd").on("onclick", function () {
            document.location.href = '@Url.Action("Add", "Product")';
        });

        var counter = 1;

        $('#addRow').on('click', function () {
            table.row.add([
                counter + '.1',
                counter + '.2',
                counter + '.3',
                counter + '.4',
                counter + '.5',
                counter + '.6'
            ]).draw();

            counter++;
        });

        //$('#myModal').modal('hide');

        $('#myModal').on('show.bs.modal', function () {
            alert('在 show 方法调用时立即触发！');
        });

        $('#myModal').on('shown.bs.modal', function () {
            alert('在模态框显示完毕后触发！');
        });

        $('#myModal').on('hide.bs.modal', function () {
            alert('在 hide 方法调用时立即触发！');
        });

        $('#myModal').on('hiden.bs.modal', function () {
            alert('在模态框显示完毕后触发！');
        });

        $('#myModal').on('loaded.bs.modal', function () {
            alert('远程数据加载完毕后触发！');
        });


    });
</script>